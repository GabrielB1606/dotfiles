# Fixes
set-option -sa terminal-overrides ",xterm*:Tc" # Fix color
set -sg escape-time 10 # Fix Esc delay time
set-option -g renumber-windows on # Fix numbers when closing windows
set -g mouse on # Set mouse support on
set-window-option -g mode-keys vi # VI Motions

# Open new panes in CWD
bind -n M-Down split-window -v -c "#{pane_current_path}"
bind -n M-Right split-window -h -c "#{pane_current_path}"
bind -n M-Up display-popup -h 80% -w 80% -d "#{pane_current_path}" -E 

# Prefix
unbind C-b
set -g prefix M-t # alt+t
bind M-t send-prefix

# Personal keybinds
bind -n M-P command-prompt
bind -n M-h select-pane -L
bind -n M-l select-pane -R
bind -n M-k select-pane -U
bind -n M-j select-pane -D
bind -n M-x kill-pane
bind -n M-H previous-window
bind -n M-L next-window
bind -n M-N command-prompt -p "window name:" "new-window -n '%%'"
bind -n M-X kill-window
bind -n M-S choose-tree
bind -n M-z resize-pane -Z


# Plugins (use prefix + I to install pkgs)
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'hallazzang/tmux-reset'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tardunge/tmux-gh'

## Config plugins
### tmux-yank
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel
### tmux-resurrect
set -g @resurrect-strategy-nvim 'session'
### tmux gh
# set-option -g status-right '#{tmux_gh_uname}'

## Theme
set -g @plugin 'niksingh710/minimal-tmux-status'
set -g @minimal-tmux-expanded-icon "ÓÆÅ "
# set -g @minimal-tmux-expanded-icon "üëÅÔ∏èüîç "
set -g @minimal-tmux-fg "#000000"
set -g @minimal-tmux-bg "#277D46"
set -g @minimal-tmux-justify "centre"
set -g @minimal-tmux-indicator-str "  dirty-mayonnaise  "
set -g @minimal-tmux-indicator true
set -g @minimal-tmux-status "bottom"
# set -g @minimal-tmux-bg "#${config.stylix.base16Scheme.base01}" (or you can use it with pywal)
set -g @minimal-tmux-use-arrow true
set -g @minimal-tmux-right-arrow "ÓÇ¥"
set -g @minimal-tmux-left-arrow "ÓÇ∂"

# Status on right: current time, git branch (for current pane), battery %, and connected network name
set -g status-interval 2
set -g status-right-length 250
set -g status-left-length 250
set -g @minimal-tmux-right true
# set -g @minimal-tmux-status-right ""
set -g @minimal-tmux-status-right-extra "#(date +%H:%M) Û∞•î | #(cd #{pane_current_path} && b=\$(git branch --show-current 2>/dev/null); [ -n \"\$b\" ] && echo \"\$b Óú• | \")#(iwctl station 'wlan0' show | grep 'Connected network' | awk -F' ' '{print \$3}') Ôá´  "
set -g @minimal-tmux-status-left-extra "| #(cat /sys/class/power_supply/BAT1/capacity)% Û∞ãë"
set -g @minimal-tmux-status-right " "

# set -g @plugin 'dracula/tmux'
# set -g @dracula-show-flags true
# set -g @dracula-show-powerline false
# set -g @dracula-show-left-icon session
# set -g @dracula-show-ssh-session-port false
# set -g @dracula-show-timezone false
# set -g @dracula-git-show-remote-status true
# set -g @dracula-show-fahrenheit false
# set -g @dracula-show-location false
# set -g @dracula-network-ethernet-label "Û∞àÄ"
# set -g @dracula-network-offline-label "Û±ç¢"
# set -g @dracula-network-wifi-label "Ôêº"
# set -g @dracula-git-no-untracked-files true
# set -g @dracula-git-disable-status true
# set -g @dracula-git-show-remote-status false
# set -g @dracula-time-format "%m/%d/%g %R"
# set -g @dracula-cpu-usage-label "Ôãõ"
# set -g @dracula-ram-usage-label "Óâ¶"
# set -g @dracula-ram-usage-colors "orange dark_gray"
# set -g @dracula-show-empty-plugins false
# set -g @dracula-plugins "git cpu-usage ram-usage time battery network"


# set -g @catppuccin_flavor 'mocha' # latte, frappe, macchiato or mocha
# set -g @plugin 'catppuccin/tmux'
# set -g @plugin 'uttarayan21/tmux-wombat'
# set -g @plugin 'niksingh710/minimal-tmux-status'
# set -g @minimal-tmux-expanded-icon "üëÅÔ∏è"
# set -g @minimal-tmux-fg "#000000"
# set -g @minimal-tmux-status-right "#S"
# set -g @minimal-tmux-status-right-extra "#{tmux_gh_uname}"
# set -g status-right-length 20

run '~/.tmux/plugins/tpm/tpm'
